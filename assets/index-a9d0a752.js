var He=Object.defineProperty;var qe=(e,t,n)=>t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _e=(e,t,n)=>(qe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function R(){}function Ce(e){return e()}function ke(){return Object.create(null)}function X(e){e.forEach(Ce)}function Ne(e){return typeof e=="function"}function ee(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let de;function Pe(e,t){return e===t?!0:(de||(de=document.createElement("a")),de.href=t,e===de.href)}function Be(e){return Object.keys(e).length===0}function xe(e,...t){if(e==null){for(const s of t)s(void 0);return R}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ze(e,t,n){e.$$.on_destroy.push(xe(t,n))}function Me(e,t,n){return e.set(n),t}function _(e,t){e.appendChild(t)}function B(e,t,n){e.insertBefore(t,n||null)}function q(e){e.parentNode&&e.parentNode.removeChild(e)}function Ge(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function M(e){return document.createElement(e)}function W(e){return document.createTextNode(e)}function O(){return W(" ")}function Ze(){return W("")}function se(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ve(e){return Array.from(e.childNodes)}function oe(e,t){t=""+t,e.data!==t&&(e.data=t)}function Oe(e,t,n,s){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function x(e,t,n){e.classList.toggle(t,!!n)}function We(e,t,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:s})}let ie;function le(e){ie=e}function we(){if(!ie)throw new Error("Function called outside component initialization");return ie}function Ie(e){we().$$.on_mount.push(e)}function Xe(e){we().$$.on_destroy.push(e)}function Ye(){const e=we();return(t,n,{cancelable:s=!1}={})=>{const i=e.$$.callbacks[t];if(i){const r=We(t,n,{cancelable:s});return i.slice().forEach(u=>{u.call(e,r)}),!r.defaultPrevented}return!0}}function Ke(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(s=>s.call(this,t))}const U=[],re=[];let Q=[];const me=[],Ue=Promise.resolve();let be=!1;function Je(){be||(be=!0,Ue.then(Re))}function ve(e){Q.push(e)}function Qe(e){me.push(e)}const ye=new Set;let Y=0;function Re(){if(Y!==0)return;const e=ie;do{try{for(;Y<U.length;){const t=U[Y];Y++,le(t),$e(t.$$)}}catch(t){throw U.length=0,Y=0,t}for(le(null),U.length=0,Y=0;re.length;)re.pop()();for(let t=0;t<Q.length;t+=1){const n=Q[t];ye.has(n)||(ye.add(n),n())}Q.length=0}while(U.length);for(;me.length;)me.pop()();be=!1,ye.clear(),le(e)}function $e(e){if(e.fragment!==null){e.update(),X(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ve)}}function et(e){const t=[],n=[];Q.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),Q=t}const he=new Set;let Z;function tt(){Z={r:0,c:[],p:Z}}function nt(){Z.r||X(Z.c),Z=Z.p}function V(e,t){e&&e.i&&(he.delete(e),e.i(t))}function $(e,t,n,s){if(e&&e.o){if(he.has(e))return;he.add(e),Z.c.push(()=>{he.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function J(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function st(e,t){e.d(1),t.delete(e.key)}function lt(e,t){$(e,1,1,()=>{t.delete(e.key)})}function Fe(e,t,n,s,i,r,u,c,a,f,g,d){let S=e.length,L=r.length,D=S;const y={};for(;D--;)y[e[D].key]=D;const E=[],w=new Map,o=new Map,C=[];for(D=L;D--;){const v=d(i,r,D),m=n(v);let P=u.get(m);P?s&&C.push(()=>P.p(v,t)):(P=f(m,v),P.c()),w.set(m,E[D]=P),m in y&&o.set(m,Math.abs(D-y[m]))}const F=new Set,I=new Set;function k(v){V(v,1),v.m(c,g),u.set(v.key,v),g=v.first,L--}for(;S&&L;){const v=E[L-1],m=e[S-1],P=v.key,z=m.key;v===m?(g=v.first,S--,L--):w.has(z)?!u.has(P)||F.has(P)?k(v):I.has(z)?S--:o.get(P)>o.get(z)?(I.add(P),k(v)):(F.add(z),S--):(a(m,u),S--)}for(;S--;){const v=e[S];w.has(v.key)||a(v,u)}for(;L;)k(E[L-1]);return X(C),E}function ot(e,t,n){const s=e.$$.props[t];s!==void 0&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function pe(e){e&&e.c()}function fe(e,t,n){const{fragment:s,after_update:i}=e.$$;s&&s.m(t,n),ve(()=>{const r=e.$$.on_mount.map(Ce).filter(Ne);e.$$.on_destroy?e.$$.on_destroy.push(...r):X(r),e.$$.on_mount=[]}),i.forEach(ve)}function ue(e,t){const n=e.$$;n.fragment!==null&&(et(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function it(e,t){e.$$.dirty[0]===-1&&(U.push(e),Je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ce(e,t,n,s,i,r,u=null,c=[-1]){const a=ie;le(e);const f=e.$$={fragment:null,ctx:[],props:r,update:R,not_equal:i,bound:ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:ke(),dirty:c,skip_bound:!1,root:t.target||a.$$.root};u&&u(f.root);let g=!1;if(f.ctx=n?n(e,t.props||{},(d,S,...L)=>{const D=L.length?L[0]:S;return f.ctx&&i(f.ctx[d],f.ctx[d]=D)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](D),g&&it(e,d)),S}):[],f.update(),g=!0,X(f.before_update),f.fragment=s?s(f.ctx):!1,t.target){if(t.hydrate){const d=Ve(t.target);f.fragment&&f.fragment.l(d),d.forEach(q)}else f.fragment&&f.fragment.c();t.intro&&V(e.$$.fragment),fe(e,t.target,t.anchor),Re()}le(a)}class ae{constructor(){_e(this,"$$");_e(this,"$$set")}$destroy(){ue(this,1),this.$destroy=R}$on(t,n){if(!Ne(n))return R;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!Be(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const rt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(rt);function Se(e,t,n){const s=e.slice();return s[19]=t[n],s[21]=n,s}function ft(e){let t,n,s,i;return{c(){t=M("div"),n=M("img"),b(n,"alt","圖片"),Pe(n.src,s=e[19].path)||b(n,"src",s),b(n,"height",i=e[0].height),b(n,"class","svelte-ssj1t4"),b(t,"class","svelte-ssj1t4")},m(r,u){B(r,t,u),_(t,n)},p(r,u){u&1&&!Pe(n.src,s=r[19].path)&&b(n,"src",s),u&1&&i!==(i=r[0].height)&&b(n,"height",i)},d(r){r&&q(t)}}}function ut(e){let t,n=e[19].name+"",s;return{c(){t=M("div"),s=W(n),b(t,"class","svelte-ssj1t4")},m(i,r){B(i,t,r),_(t,s)},p(i,r){r&1&&n!==(n=i[19].name+"")&&oe(s,n)},d(i){i&&q(t)}}}function Le(e,t){let n,s,i,r,u;function c(g,d){if(g[19].type==="text")return ut;if(g[19].type==="image")return ft}let a=c(t),f=a&&a(t);return{key:e,first:null,c(){n=M("div"),f&&f.c(),s=O(),b(n,"class",i="gift "+t[0].style+" svelte-ssj1t4"),b(n,"style",r=`transform: rotateX(${t[3]*t[21]}deg) translateZ(${t[6]}px)`),b(n,"data-pos",u=t[3]*t[21]),x(n,"text-red-600",t[1][0]==1&&t[5][0]==t[21]||t[1][1]==1&&t[5][1]==t[21]||t[1][2]==1&&t[5][2]==t[21]),this.first=n},m(g,d){B(g,n,d),f&&f.m(n,null),_(n,s)},p(g,d){t=g,a===(a=c(t))&&f?f.p(t,d):(f&&f.d(1),f=a&&a(t),f&&(f.c(),f.m(n,s))),d&1&&i!==(i="gift "+t[0].style+" svelte-ssj1t4")&&b(n,"class",i),d&73&&r!==(r=`transform: rotateX(${t[3]*t[21]}deg) translateZ(${t[6]}px)`)&&b(n,"style",r),d&9&&u!==(u=t[3]*t[21])&&b(n,"data-pos",u),d&35&&x(n,"text-red-600",t[1][0]==1&&t[5][0]==t[21]||t[1][1]==1&&t[5][1]==t[21]||t[1][2]==1&&t[5][2]==t[21])},d(g){g&&q(n),f&&f.d()}}}function ct(e){let t,n=[],s=new Map,i,r=J(e[0].gifts);const u=c=>c[21];for(let c=0;c<r.length;c+=1){let a=Se(e,r,c),f=u(a);s.set(f,n[c]=Le(f,a))}return{c(){t=M("div");for(let c=0;c<n.length;c+=1)n[c].c();b(t,"class",i="gift-container "+e[7]+" svelte-ssj1t4"),x(t,"autoTurn",e[2])},m(c,a){B(c,t,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);e[9](t)},p(c,[a]){a&107&&(r=J(c[0].gifts),n=Fe(n,a,u,1,c,r,s,t,st,Le,null,Se)),a&128&&i!==(i="gift-container "+c[7]+" svelte-ssj1t4")&&b(t,"class",i),a&132&&x(t,"autoTurn",c[2])},i:R,o:R,d(c){c&&q(t);for(let a=0;a<n.length;a+=1)n[a].d();e[9](null)}}}function at(e,t,n){let s,i,r,u;const c=Ye();function a(k){c("finished",k)}let{trigger:f}=t,{config:g}=t,{showPos:d}=t,S=!1,L=0,D=0,y=[],E;Ie(()=>{o(),w()});function w(){g.gifts.forEach((k,v)=>{y[v]={from:v===0?0:y[v-1].to,to:v===0?r:y[v-1].to+r,name:k.name,index:v}})}function o(){E&&(E.style.setProperty("--rotateY",`${g.rotateY}deg`),E.style.setProperty("--duration",`${g.duration}ms`),E.style.setProperty("--fontSize",`${g.fontSize}px`),E.style.setProperty("--height",`${g.height}px`),E.style.setProperty("--width",`${g.width}px`),E.style.setProperty("--currentDeg",`-${L}deg`))}function C(){let k=Math.random()*360+1800;k-=k%r,D=k;const v=g.rollback?Math.random()*g.rollback+1:1;E.style.setProperty("--targetDeg",`-${D}deg`),E.style.setProperty("--rollBackDeg",`${v}`),n(2,S=!0)}function F(){L=D%360,E.style.setProperty("--currentDeg",`-${L}deg`);let k=null;const v=L+r/2;y.forEach(z=>{v>=z.from&&v<=z.to&&(k=z.index)}),console.log("currentDeg",L);let m=y.findIndex(z=>z.index==k);console.log("每一個結果",m),console.log("giftsDeg",y),console.log("giftName",k);let P=[];m==0?P.push(y[y.length-1].name,y[m].name,y[m+1].name):m==y.length-1?P.push(y[m-1].name,y[m].name,y[0].name):P.push(y[m-1].name,y[m].name,y[m+1].name),m==0?n(5,s=[y.length-1,0,1]):m==y.length-1?n(5,s=[m-1,m,0]):n(5,s=[m-1,m,m+1]),console.log("setIndex",s),n(2,S=!1),a(P)}function I(k){re[k?"unshift":"push"](()=>{E=k,n(4,E)})}return e.$$set=k=>{"trigger"in k&&n(8,f=k.trigger),"config"in k&&n(0,g=k.config),"showPos"in k&&n(1,d=k.showPos)},e.$$.update=()=>{e.$$.dirty&1&&n(7,i=g.run3D?"three-dimension":"flat"),e.$$.dirty&1&&n(3,r=360/g.gifts.length),e.$$.dirty&9&&n(6,u=g.height/2/Math.tan(r/2/180*Math.PI)),e.$$.dirty&1&&g&&(o(),w()),e.$$.dirty&256&&f!=null&&C(),e.$$.dirty&5&&S&&setTimeout(()=>{F()},g.duration+200)},n(5,s=[]),[g,d,S,r,E,s,u,i,f,I]}class dt extends ae{constructor(t){super(),ce(this,t,at,ct,ee,{trigger:8,config:0,showPos:1})}}const K=[];function ht(e,t=R){let n;const s=new Set;function i(c){if(ee(e,c)&&(e=c,n)){const a=!K.length;for(const f of s)f[1](),K.push(f,e);if(a){for(let f=0;f<K.length;f+=2)K[f][0](K[f+1]);K.length=0}}}function r(c){i(c(e))}function u(c,a=R){const f=[c,a];return s.add(f),s.size===1&&(n=t(i,r)||R),c(e),()=>{s.delete(f),s.size===0&&n&&(n(),n=null)}}return{set:i,update:r,subscribe:u}}const ge=ht(1e4);function gt(e){let t,n,s,i,r,u,c,a,f,g,d,S,L;return{c(){t=M("div"),n=M("div"),s=M("div"),i=M("div"),r=M("div"),r.innerHTML="<span>頭像</span>",u=O(),c=M("div"),a=M("span"),a.textContent="金額:",f=O(),g=M("span"),d=W(e[0]),S=O(),L=M("div"),L.innerHTML="<span>系統</span>",b(r,"class","mr-3"),b(i,"class","flex"),b(s,"class","flex justify-between px-3"),b(n,"class","w-full text-[40px]"),Oe(t,"background-color","#09384c"),b(t,"class","absolute top-0 left-0 z-10 text-white h-[10vh] w-full flex items-center")},m(D,y){B(D,t,y),_(t,n),_(n,s),_(s,i),_(i,r),_(i,u),_(i,c),_(c,a),_(c,f),_(c,g),_(g,d),_(s,S),_(s,L)},p(D,[y]){y&1&&oe(d,D[0])},i:R,o:R,d(D){D&&q(t)}}}function pt(e,t,n){let s;return ze(e,ge,i=>n(0,s=i)),[s]}class _t extends ae{constructor(t){super(),ce(this,t,pt,gt,ee,{})}}function yt(e){let t,n,s,i,r,u,c,a,f,g,d,S,L,D,y,E,w,o,C,F,I,k,v,m,P,z;return{c(){t=M("div"),n=M("div"),s=M("span"),s.textContent="Win:",i=O(),r=M("span"),u=W(e[3]),c=O(),a=M("div"),f=M("button"),f.textContent="最大賭注",g=O(),d=M("button"),d.textContent="開始",S=O(),L=M("button"),L.textContent="自動",D=O(),y=M("div"),E=M("button"),E.innerHTML='<span class="mr-8">-</span>',w=O(),o=M("div"),C=M("span"),C.textContent="籌碼:",F=O(),I=M("span"),k=W(e[0]),v=O(),m=M("button"),m.innerHTML='<span class="ml-8">+</span>',b(n,"class","flex justify-center"),b(f,"class","w-[30%] border border-white"),b(d,"class","w-[30%] border border-white"),x(d,"active",e[1]),x(d,"disabled",e[2]),b(L,"class","w-[30%] border border-white"),b(a,"class","flex items-center justify-around"),b(o,"class","w-[30%] border border-white text-center"),b(y,"class","flex justify-center"),Oe(t,"background-color","#09384c"),b(t,"class","absolute bottom-0 left-0 z-10 text-white text-[40px] h-[25vh] w-full flex justify-center flex-col items-stretch")},m(H,h){B(H,t,h),_(t,n),_(n,s),_(n,i),_(n,r),_(r,u),_(t,c),_(t,a),_(a,f),_(a,g),_(a,d),_(a,S),_(a,L),_(t,D),_(t,y),_(y,E),_(y,w),_(y,o),_(o,C),_(o,F),_(o,I),_(I,k),_(y,v),_(y,m),P||(z=[se(f,"click",e[5]),se(d,"click",e[4]),se(E,"click",e[6]),se(m,"click",e[7])],P=!0)},p(H,[h]){h&8&&oe(u,H[3]),h&2&&x(d,"active",H[1]),h&4&&x(d,"disabled",H[2]),h&1&&oe(k,H[0])},i:R,o:R,d(H){H&&q(t),P=!1,X(z)}}}function mt(e,t,n){let{active:s}=t,{disabled:i}=t,{winMoney:r}=t,{bet:u=100}=t;function c(d){Ke.call(this,e,d)}const a=()=>{n(0,u=1e3)},f=()=>{n(0,u=u-100)},g=()=>{n(0,u=u+100)};return e.$$set=d=>{"active"in d&&n(1,s=d.active),"disabled"in d&&n(2,i=d.disabled),"winMoney"in d&&n(3,r=d.winMoney),"bet"in d&&n(0,u=d.bet)},e.$$.update=()=>{e.$$.dirty&1&&(u>1e3?n(0,u=1e3):u<100&&n(0,u=100))},[u,s,i,r,c,a,f,g]}class bt extends ae{constructor(t){super(),ce(this,t,mt,yt,ee,{active:1,disabled:2,winMoney:3,bet:0})}}function Ee(e,t,n){const s=e.slice();return s[11]=t[n],s[30]=n,s}function Ae(e,t,n){const s=e.slice();return s[31]=t[n],s[30]=n,s}function Te(e,t){let n,s,i;return s=new dt({props:{showPos:t[3][t[30]],trigger:t[6],config:t[31]}}),s.$on("finished",t[13]),{key:e,first:null,c(){n=Ze(),pe(s.$$.fragment),this.first=n},m(r,u){B(r,n,u),fe(s,r,u),i=!0},p(r,u){t=r;const c={};u[0]&520&&(c.showPos=t[3][t[30]]),u[0]&64&&(c.trigger=t[6]),u[0]&512&&(c.config=t[31]),s.$set(c)},i(r){i||(V(s.$$.fragment,r),i=!0)},o(r){$(s.$$.fragment,r),i=!1},d(r){r&&q(n),ue(s,r)}}}function je(e){let t,n=`Round${e[30]+1}: ${e[11]}`,s;return{c(){t=M("div"),s=W(n),b(t,"class","result svelte-ahb3vf")},m(i,r){B(i,t,r),_(t,s)},p(i,r){r[0]&16&&n!==(n=`Round${i[30]+1}: ${i[11]}`)&&oe(s,n)},d(i){i&&q(t)}}}function vt(e){let t,n,s,i,r,u,c,a,f=[],g=new Map,d,S,L,D,y,E,w,o,C,F,I;t=new _t({});let k=J(e[9]);const v=h=>h[30];for(let h=0;h<k.length;h+=1){let T=Ae(e,k,h),N=v(T);g.set(N,f[h]=Te(N,T))}let m=J(e[4]),P=[];for(let h=0;h<m.length;h+=1)P[h]=je(Ee(e,m,h));function z(h){e[16](h)}let H={active:e[7],disabled:e[5],winMoney:e[1]};return e[2]!==void 0&&(H.bet=e[2]),w=new bt({props:H}),re.push(()=>ot(w,"bet",z)),w.$on("click",e[17]),{c(){pe(t.$$.fragment),n=O(),s=M("div"),i=M("div"),i.innerHTML='<span class="svelte-ahb3vf">SlotMachine</span>',r=O(),u=M("div"),c=M("div"),a=M("div");for(let h=0;h<f.length;h+=1)f[h].c();d=O(),S=M("div"),L=M("div");for(let h=0;h<P.length;h+=1)P[h].c();D=O(),y=M("div"),y.innerHTML='<a href="https://github.com/guahsu/Vue-SlotMachine/" target="_blank" class="svelte-ahb3vf">→ GitHub Source Code</a>',E=O(),pe(w.$$.fragment),b(i,"class","badge svelte-ahb3vf"),b(a,"class","container svelte-ahb3vf"),b(c,"class","window svelte-ahb3vf"),b(u,"class","body svelte-ahb3vf"),b(L,"class","resultList-container svelte-ahb3vf"),b(S,"class","resultList svelte-ahb3vf"),x(S,"openResultList",e[8]),b(y,"class","github svelte-ahb3vf"),b(s,"id","SlotMachine"),b(s,"class","z-0 svelte-ahb3vf")},m(h,T){fe(t,h,T),B(h,n,T),B(h,s,T),_(s,i),_(s,r),_(s,u),_(u,c),_(c,a);for(let N=0;N<f.length;N+=1)f[N]&&f[N].m(a,null);e[14](a),_(s,d),_(s,S),_(S,L);for(let N=0;N<P.length;N+=1)P[N]&&P[N].m(L,null);_(s,D),_(s,y),B(h,E,T),fe(w,h,T),C=!0,F||(I=se(S,"click",e[15]),F=!0)},p(h,T){if(T[0]&8776&&(k=J(h[9]),tt(),f=Fe(f,T,v,1,h,k,g,a,lt,Te,null,Ae),nt()),T[0]&16){m=J(h[4]);let p;for(p=0;p<m.length;p+=1){const l=Ee(h,m,p);P[p]?P[p].p(l,T):(P[p]=je(l),P[p].c(),P[p].m(L,null))}for(;p<P.length;p+=1)P[p].d(1);P.length=m.length}(!C||T[0]&256)&&x(S,"openResultList",h[8]);const N={};T[0]&128&&(N.active=h[7]),T[0]&32&&(N.disabled=h[5]),T[0]&2&&(N.winMoney=h[1]),!o&&T[0]&4&&(o=!0,N.bet=h[2],Qe(()=>o=!1)),w.$set(N)},i(h){if(!C){V(t.$$.fragment,h);for(let T=0;T<k.length;T+=1)V(f[T]);V(w.$$.fragment,h),C=!0}},o(h){$(t.$$.fragment,h);for(let T=0;T<f.length;T+=1)$(f[T]);$(w.$$.fragment,h),C=!1},d(h){h&&(q(n),q(s),q(E)),ue(t,h);for(let T=0;T<f.length;T+=1)f[T].d();e[14](null),Ge(P,h),ue(w,h),F=!1,I()}}}function wt(e){const n=[];for(let s=0;s<e.length;s++)e[s]===1&&n.push(s);return n}function te(e,t){return e[0]==t[0]||e[0]==t[1]}function G(e,t){return e[1]==t[0]||e[1]==t[1]||e[1]==t[2]}function ne(e,t){return e[e.length-1]==t[e.length-1]||e[e.length-1]==t[e.length-2]}function kt(e){let t=0;for(let n=0;n<e.length;n++)for(let s=0;s<e[n].length;s++)e[n][s]===1&&t++;return t}function Pt(e,t,n){let s,i,r,u,c,a,f,g,d;ze(e,ge,p=>n(10,d=p));let S,L=0,D,y,E=[0,0,0],w=[0,0,0],o,C=[];function F(){let p=[];for(let l=0;l<5;l++)Math.floor(Math.random()*10)>5?(p=[{type:"text",name:6},{type:"text",name:6},{type:"text",name:6},{type:"text",name:6},{type:"text",name:6},{type:"text",name:7},{type:"text",name:7},{type:"text",name:7},{type:"text",name:7},{type:"text",name:7}],n(9,c[l].gifts=p,c)):(p=[{type:"text",name:7},{type:"text",name:7},{type:"text",name:6},{type:"text",name:7},{type:"text",name:7},{type:"text",name:6},{type:"text",name:7},{type:"text",name:6},{type:"text",name:7},{type:"text",name:6}],n(9,c[l].gifts=p,c))}function I(){n(7,r=!0),setTimeout(()=>{n(7,r=!1)},500),setTimeout(()=>{n(6,i=new Date)},1),F(),n(5,u=!0),n(3,s=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]])}function k(p){const l=S.querySelectorAll(".autoTurn");g.push(p.detail),l.length===1&&(n(5,u=!1),n(4,f=[...f,g]),console.log("resultList",f),o=[...g],n(11,g=[]),console.log("array",o),v())}function v(){E=[0,0,0],z(o[0]),console.log("firstPos",E),C.push(E),m(E,0)}function m(p,l){w=[0,0,0];let A=wt(p);if(l>o.length-2){P(),console.log("resultPos",C),n(3,s=C),D=kt(s),n(1,L=D*y),C=[],Me(ge,d+=L,d);return}else{for(let j=0;j<A.length;j++)if(A[j]==0){if(!te(o[l],o[l+1]))continue;o[l][A[j]]==o[l+1][A[j]]&&(l==0&&te(o[l+1],o[l+2])||l>0)&&(w[A[j]]=1),o[l][A[j]]==o[l+1][A[j]+1]&&(l==0&&G(o[l+1],o[l+2])||l>0)&&(w[A[j]+1]=1)}else if(A[j]==o[0].length-1){if(!ne(o[l],o[l+1]))continue;o[l][A[j]]==o[l+1][A[j]]&&(l==0&&ne(o[l+1],o[l+2])||l>0)&&(w[A[j]]=1),o[l][A[j]]==o[l+1][A[j]-1]&&(l==0&&G(o[l+1],o[l+2])||l>0)&&(w[A[j]-1]=1)}else{if(!G(o[l],o[l+1]))continue;o[l][A[j]]==o[l+1][A[j]-1]&&(l==0&&te(o[l+1],o[l+2])||l>0)&&(w[A[j]-1]=1),o[l][A[j]]==o[l+1][A[j]]&&(l==0&&G(o[l+1],o[l+2])||l>0)&&(w[A[j]]=1),o[l][A[j]]==o[l+1][A[j]+1]&&(l==0&&ne(o[l+1],o[l+2])||l>0)&&(w[A[j]+1]=1)}return C.push(w),m(w,l+1)}}function P(){for(let p=0;p<o.length;p++)for(let l=0;l<o[p].length;l++){let A=C[p][l]==1||C[p][l+1]==1;C[p][0]==1||C[p][o[0].length-1]==1,l!=o[p].length-1&&o[p][l]==o[p][l+1]&&A&&(C[p][l]=1,C[p][l+1]=1)}}function z(p){for(let l=0;l<p.length;l++)if(l==0){if(o[0][l]!=o[1][l]&&o[0][l]!=o[1][l+1])continue;(o[0][l]==o[1][l]&&te(o[1],o[2])||o[0][l]==o[1][l+1]&&G(o[1],o[2]))&&(E[l]=1)}else if(l==p.length-1){if(o[0][l]!=o[1][l]&&o[0][l]!=o[1][l-1])continue;(o[0][l]==o[1][l]&&ne(o[1],o[2])||o[0][l]==o[1][l-1]&&G(o[1],o[2]))&&(E[l]=1)}else{if(o[0][l]!=o[1][l]&&o[0][l]!=o[1][l-1]&&o[0][l]!=o[1][l+1])continue;(o[0][l]==o[1][l-1]&&te(o[1],o[2])||o[0][l]==o[1][l]&&G(o[1],o[2])||o[0][l]==o[1][l+1]&&ne(o[1],o[2]))&&(E[l]=1)}}function H(p){re[p?"unshift":"push"](()=>{S=p,n(0,S)})}const h=()=>{n(8,a=!1)};function T(p){y=p,n(2,y)}const N=()=>{if(!u)Me(ge,d-=y,d),I();else return};return n(3,s=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]),n(6,i=null),n(7,r=!1),n(5,u=!1),n(9,c=[{style:"gift-style",gifts:Array.from(new Array(10),(p,l)=>({type:"text",name:l})),duration:4e3,fontSize:50,height:100,width:120},{style:"gift-style",gifts:Array.from(new Array(10),(p,l)=>({type:"text",name:l})),duration:5e3,fontSize:50,height:100,width:120},{style:"gift-style",gifts:Array.from(new Array(10),(p,l)=>({type:"text",name:l})),duration:6e3,fontSize:50,height:100,width:120},{style:"gift-style",gifts:Array.from(new Array(10),(p,l)=>({type:"text",name:l})),duration:7e3,fontSize:50,height:100,width:120},{style:"gift-style",gifts:Array.from(new Array(10),(p,l)=>({type:"text",name:l})),duration:8e3,fontSize:50,height:100,width:120}]),n(8,a=!1),n(4,f=[]),n(11,g=[]),[S,L,y,s,f,u,i,r,a,c,d,g,I,k,H,h,T,N]}class Mt extends ae{constructor(t){super(),ce(this,t,Pt,vt,ee,{},null,[-1,-1])}}function St(e){let t,n;return t=new Mt({}),{c(){pe(t.$$.fragment)},m(s,i){fe(t,s,i),n=!0},p:R,i(s){n||(V(t.$$.fragment,s),n=!0)},o(s){$(t.$$.fragment,s),n=!1},d(s){ue(t,s)}}}function De(e){e.preventDefault()}function Lt(e){return Ie(()=>{document.body.addEventListener("touchmove",De,{passive:!1})}),Xe(()=>{document.body.removeEventListener("touchmove",De)}),[]}class Et extends ae{constructor(t){super(),ce(this,t,Lt,St,ee,{})}}new Et({target:document.getElementById("app")});
